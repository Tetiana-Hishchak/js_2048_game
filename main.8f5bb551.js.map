{"version":3,"sources":["scripts/main.js"],"names":["start","document","querySelector","gameScore","messageStart","messageWin","messageLose","fieldCell","getElementsByClassName","board","prevBoard","restart","i","length","j","cell","getElementById","updateCell","score","innerText","addEventListener","classList","contains","remove","add","textContent","setNewNumber","e","updatePrevBoard","code","moveLeft","moveRight","moveUp","moveDown","replace","gameOver","index","r","c","id","toString","slide","row","filter","num","rowNew","push","reverse","isBoardEqual","hasEmptyCell","found","value","Math","random","floor","current"],"mappings":"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","file":"main.8f5bb551.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst start = document.querySelector('.button');\nconst gameScore = document.querySelector('.game-score');\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst fieldCell = document.getElementsByClassName('field-cell');\nconst board = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\nconst prevBoard = [\n  [null, null, null, null],\n  [null, null, null, null],\n  [null, null, null, null],\n  [null, null, null, null],\n];\n\nstart.addEventListener('click', () => {\n  if (start.classList.contains('start')) {\n    start.classList.remove('start');\n    start.classList.add('restart');\n    start.textContent = 'Restart';\n    messageStart.classList.add('hidden');\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n    setNewNumber();\n    setNewNumber();\n  } else if (start.classList.contains('restart')) {\n    start.classList.remove('restart');\n    start.classList.add('start');\n    start.textContent = 'Start';\n    messageStart.classList.remove('hidden');\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n    restart();\n  }\n});\n\nfunction restart() {\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board.length; j++) {\n      const cell = document.getElementById(`${i}-${j}`);\n\n      board[i][j] = 0;\n\n      const num = board[i][j];\n\n      updateCell(cell, num);\n    }\n  }\n  score = 0;\n\n  gameScore.innerText = 0;\n}\n\ndocument.addEventListener('keyup', (e) => {\n  if (start.classList.contains('start')) {\n    return;\n  }\n\n  updatePrevBoard();\n\n  switch (e.code) {\n    case 'ArrowLeft':\n      moveLeft();\n      setNewNumber();\n      break;\n\n    case 'ArrowRight':\n      moveRight();\n      setNewNumber();\n      break;\n\n    case 'ArrowUp':\n      moveUp();\n      setNewNumber();\n      break;\n\n    case 'ArrowDown':\n      moveDown();\n      setNewNumber();\n      break;\n  }\n\n  gameScore.innerText = score;\n\n  if (score === 2048) {\n    messageWin.classList.remove('hidden');\n    start.classList.replace('restart', 'start');\n    start.innerText = 'Start';\n  }\n\n  if (gameOver()) {\n    messageLose.classList.remove('hidden');\n  }\n});\n\nlet index = 0;\n\nfor (let r = 0; r < board.length; r++) {\n  for (let c = 0; c < board.length; c++) {\n    fieldCell[index++].id = r.toString() + '-' + c.toString();\n  }\n}\n\nlet score = 0;\n\nfunction slide(row) {\n  row.filter(num => num !== 0);\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  const rowNew = row.filter(num => num !== 0);\n\n  while (rowNew.length < board.length) {\n    rowNew.push(0);\n  }\n\n  return rowNew;\n}\n\nfunction moveLeft() {\n  for (let r = 0; r < board.length; r++) {\n    let row = board[r];\n\n    row = slide(row);\n    board[r] = row;\n\n    for (let c = 0; c < board.length; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      const value = board[r][c];\n\n      updateCell(cell, value);\n    }\n  }\n}\n\nfunction moveRight() {\n  for (let r = 0; r < board.length; r++) {\n    let row = board[r];\n\n    row.reverse();\n    row = slide(row);\n    board[r] = row.reverse();\n\n    for (let c = 0; c < board.length; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      const value = board[r][c];\n\n      updateCell(cell, value);\n    }\n  }\n}\n\nfunction moveUp() {\n  for (let c = 0; c < board.length; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row = slide(row);\n\n    for (let r = 0; r < board.length; r++) {\n      board[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const value = board[r][c];\n\n      updateCell(cell, value);\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let c = 0; c < board.length; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < board.length; r++) {\n      board[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const value = board[r][c];\n\n      updateCell(cell, value);\n    }\n  }\n}\n\nfunction isBoardEqual() {\n  for (let r = 0; r < board.length; r++) {\n    for (let c = 0; c < board.length; c++) {\n      if (board[r][c] !== prevBoard[r][c]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction updatePrevBoard() {\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board.length; j++) {\n      prevBoard[i][j] = board[i][j];\n    }\n  }\n}\n\nfunction setNewNumber() {\n  if (!hasEmptyCell() || isBoardEqual()) {\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const value = Math.random() > 0.1 ? 2 : 4;\n    const r = Math.floor(Math.random() * board.length);\n    const c = Math.floor(Math.random() * board.length);\n\n    if (board[r][c] === 0) {\n      board[r][c] = value;\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      cell.innerText = value;\n\n      updateCell(cell, value);\n\n      found = true;\n    }\n  }\n}\n\nfunction hasEmptyCell() {\n  for (let r = 0; r < board.length; r++) {\n    for (let c = 0; c < board.length; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction updateCell(cell, value) {\n  cell.innerText = '';\n  cell.classList.value = '';\n  cell.classList.add('field-cell');\n\n  if (value > 0) {\n    cell.innerText = value.toString();\n\n    if (value <= 2048) {\n      cell.classList.add('field-cell--' + value.toString());\n    }\n  }\n}\n\nfunction gameOver() {\n  if (hasEmptyCell()) {\n    return false;\n  }\n\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board.length; j++) {\n      const current = board[i][j];\n\n      if ((i + 1 < board.length && current === board[i + 1][j])\n       || (j + 1 < board.length && current === board[i][j + 1])) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n"]}